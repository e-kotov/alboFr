---
format: gfm
execute: 
  message: false
  warning: false
eval: false
default-image-extension: ""
---

<!-- README.md is generated from README.Rmd. Please edit that file -->

# alboFr

<!-- badges: start -->
[![Lifecycle: experimental](https://img.shields.io/badge/lifecycle-experimental-orange.svg)](https://lifecycle.r-lib.org/articles/stages.html#experimental)
[![CRAN status](https://www.r-pkg.org/badges/version/alboFr)](https://CRAN.R-project.org/package=alboFr)
[![R-CMD-check](https://github.com/e-kotov/alboFr/actions/workflows/R-CMD-check.yaml/badge.svg)](https://github.com/e-kotov/alboFr/actions/workflows/R-CMD-check.yaml)
[![DOI](https://zenodo.org/badge/DOI/10.5281/zenodo.14914417.svg)](https://doi.org/https://doi.org/10.5281/zenodo.14914417)
<!-- badges: end -->

The goal of `alboFr` is to retrieve the latest online data from [https://signalement-moustique.anses.fr/signalement_albopictus/colonisees](https://signalement-moustique.anses.fr/signalement_albopictus/colonisees){target="_blank"} and convert them into an `sf` object.

## Installation

You can install the development version of `alboFr` from R-universe with:

```r
install.packages("alboFr",
  repos = c("https://e-kotov.r-universe.dev",
    "https://cloud.r-project.org"
  )
)
```

You can also install the development version of `alboFr` from [GitHub](https://github.com/e-kotov/alboFr) with:

```r
# install.packages("pak")
pak::pak("e-kotov/alboFr")
```

## Example with `sf` data type

The package only has one function to get the data:

```{r example}
library(alboFr)

x_sf <- get_tiger_mosquito_colonisation_in_france(output = "sf")
```

```{r}
head(x_sf)
```

```
Simple feature collection with 6 features and 1 field
Geometry type: POLYGON
Dimension:     XY
Bounding box:  xmin: 1.195249 ymin: 42.99451 xmax: 7.835923 ymax: 48.64427
Geodetic CRS:  WGS 84
  toujours_signaler                       geometry
1              TRUE POLYGON ((7.77076 48.49202,...
2              TRUE POLYGON ((1.987127 42.99451...
3              TRUE POLYGON ((1.584032 44.76673...
4              TRUE POLYGON ((1.249545 44.34751...
5              TRUE POLYGON ((2.566791 43.02245...
6              TRUE POLYGON ((3.502814 43.97531...
```

The data can then be plotted:

```{r plot}
library(ggplot2)
p <- ggplot(x_sf) +
  geom_sf(aes(fill = toujours_signaler), col = NA) +
  facet_wrap(~toujours_signaler)
p
# ggsave(
#   filename = "man/figures/map.png",
#   plot = p,
#   width = 5,
#   height = 4,
#   units = "in",
#   dpi = 300
# )
```

![](man/figures/map.png){width=100%}


Finally the data can be saved to a GeoPackage file:

```{r}
#| eval: false
library(sf)
st_write(x_sf, "tiger_mosquito_colonisation_in_france.gpkg")
```


## Example without `sf` data type

You do not have to have `sf` package installed to use {`alboFr`}. You can just retrieve the data in `geojson` format and save it directly to disk bypassing the `sf` object creation:

```{r}
x_geojson <- get_tiger_mosquito_colonisation_in_france(output = "geojson")
writeLines(x_geojson, "tiger_mosquito_colonisation_in_france.geojson")
```


## Data license

The original data does not have a well defined license, but the legal matters regarding this data can be found here: [https://signalement-moustique.anses.fr/signalement_albopictus/mentionslegales](https://signalement-moustique.anses.fr/signalement_albopictus/mentionslegales).

## Data archive

The data provider does not supply data versioning, but you can find the daily automatic snapshots of the data in this GitHub repository [https://github.com/e-kotov/alboFr-data-archive](https://github.com/e-kotov/alboFr-data-archive) or at Zenodo [https://doi.org/10.5281/zenodo.14914293](https://doi.org/10.5281/zenodo.14914293).

## Citation

```{r}
#| echo: false
#| results: asis
#| eval: true
print(citation("alboFr"), bibtex = FALSE)
```

BibTeX:
```
```{r}
#| echo: false
#| results: asis
#| eval: true
toBibtex(citation("alboFr"))
```
```
